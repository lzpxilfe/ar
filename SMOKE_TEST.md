# ArchToolkit 스모크 테스트 (Smoke Test)

목표: “큰 테스트/자동 테스트”가 없는 상황에서도, **치명적인 회귀를 3~5분 내로 잡는 최소 점검**입니다.

## 0) 기본

- QGIS 실행 후 `플러그인 관리`에서 ArchToolkit **활성화**
- 도구 아이콘/메뉴가 정상 표시되는지 확인

## 0.5) 복귀 포인트: `viridian-city` (두 번째 고향)

큰 변경을 하다 “뻑났다/회귀 같다” 싶으면, 일단 `viridian-city`로 돌아가서 기준점이 정상인지부터 확인합니다.

```bash
# 안전(권장): 복귀 브랜치를 새로 만들고 들어가기
git switch -c restore/viridian-city viridian-city

# 강제(주의): 현재 작업을 버리고 완전 복귀
git reset --hard viridian-city
git clean -fd
```

## 1) 로딩/해제(가장 중요)

- 플러그인 아이콘 메뉴가 **사라지지 않고** 정상 표시
- 플러그인 비활성화 → 다시 활성화해도 오류 없이 로드
- 도구 실행 후 QGIS를 종료/재시작해도 크래시 없이 동작

## 2) 핵심 도구 “1회 실행” 체크

데이터는 아무 DEM/벡터 샘플이어도 됩니다. (실사용 DEM 권장)

- DEM 생성: 창 열림 + 실행 버튼 동작(실행까지는 선택)
- 등고선: 창 열림(필수), 간단 실행(가능하면)
- 지형 분석: 창 열림, 1개 지수 실행(가능하면)
- 지형 단면: 2점 찍고 프로파일 생성/닫기
- 가시권/LOS: DEM 선택 후 최소 1회 실행(단일/LOS 아무거나)
- 비용표면/LCP: 시작점만(비용표면) 1회 또는 시작/도착(LCP) 1회
- 최소비용 네트워크: 소수(예: 5개) 노드로 1회 실행
- 근접/가시성 네트워크(PPA/LOS): 소수(예: 5개)로 1회 실행
- 지적도 중첩 면적표: (가능하면) 지적도 폴리곤 + AOI 폴리곤으로 1회

## 3) 정리/삭제(누수 방지)

- 결과 레이어를 삭제했을 때, 임시 표시(고무밴드/마커)가 남지 않는지 확인
- 같은 도구를 2~3회 반복 실행해도 레이어/그룹이 과도하게 꼬이지 않는지 확인

## 4) 크래시 재현(있다면)

크래시/Access violation이 한번이라도 있었다면, 다음을 일부러 해봅니다:

- 긴 연산 중 마우스 hover/스크롤/창 이동
- 실행 중 취소 버튼 클릭
- 실행 중 다른 도구 창을 열었다 닫기

문제가 재현되면 `ArchToolkit 작업 로그`와 QGIS 로그 메시지를 함께 첨부합니다.

